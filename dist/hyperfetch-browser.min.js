!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hypf",[],t):"object"==typeof exports?exports.hypf=t():e.hypf=t()}(self,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>g});const o=2147483647,r=.3,n=1,i="function"==typeof globalThis.AbortController,s="function"==typeof globalThis.ReadableStream,l="function"==typeof globalThis.WritableStream,a="function"==typeof globalThis.WebSocket,c="function"==typeof globalThis.RTCPeerConnection,u=(globalThis.FormData,"undefined"!=typeof process&&"node"===process.release.name),f=()=>i?globalThis.abortController:null,p=(e,t)=>1e3*Math.pow(2,e)*t,d=e=>1e3*Math.random()*e;const b=(...e)=>{return t=void 0,f=[...e],g=function*(e="",t={},f,{baseUrl:y,hooks:g,DEBUG:h}=Object.create(null)){var m;const{method:T="GET",retries:j=0,backoff:O=p,jitter:v=!1,jitterFactor:R=n,backoffFactor:w=r,timeout:S=o,retryOnTimeout:E=!1,params:C,headers:P={},signal:x}=t,F=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}(t,["method","retries","backoff","jitter","jitterFactor","backoffFactor","timeout","retryOnTimeout","params","headers","signal"]);try{(null==g?void 0:g.preRequest)&&g.preRequest(e,t);const o=`${y}${e}`,r=new Headers(P),n=new TextEncoder;!r.get("Content-Length")&&f&&("string"==typeof f?r.set("Content-Length",String(n.encode(f).length)):(null===(m=r.get("Content-Length"))||void 0===m?void 0:m.includes("application/json"))&&r.set("Content-Length",String(n.encode(JSON.stringify(f)).length))),!r.get("Content-Type")&&f&&"object"==typeof f&&(((null==f?void 0:f.body)||f)instanceof FormData||r.set("Content-Type","application/json")),(null==g?void 0:g.preTimeout)&&g.preTimeout(e,t),i&&(globalThis.abortController=new AbortController,globalThis.abortSignal=x||globalThis.abortController.signal);const p=S&&i?setTimeout((()=>{globalThis.abortController.abort(),(null==g?void 0:g.postTimeout)&&g.postTimeout(e,t)}),S):void 0,d=C?((e,t)=>{if(!t)return e;const o=new URL(e);return Object.entries(t).forEach((([e,t])=>o.searchParams.append(e,String(t)))),o.toString()})(o,C):o;s&&!l&&u&&(F.duplex="half"),!s&&l&&u&&(F.duplex="half"),s&&l&&u&&(F.duplex="half"),c&&u&&(F.duplex="half"),a&&u&&(F.duplex="half");const b=t.body instanceof FormData?t.body:f?JSON.stringify(f):void 0,h=Object.assign(Object.assign({method:T,signal:i?globalThis.abortSignal:null,headers:r},F),{body:b});b instanceof FormData&&h.headers.delete("Content-Type");const j=fetch(d,h);clearTimeout(p);const O=yield j,v=O.headers.get("content-type"),R=v&&v.includes("application/json")?yield O.json():yield O.text();if(!O.ok)throw function(e,t){const o=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim(),r=new Error(o?`status code ${o}`:"an unknown error");return r.name="HTTPError",r.response=e,r.data=t,r}(O,R);return(null==g?void 0:g.postRequest)&&g.postRequest(e,t,f,[null,R]),[null,R]}catch(o){if((null==g?void 0:g.postRequest)&&o instanceof Error&&g.postRequest(e,t,f,[o,null]),o instanceof Error)if("AbortError"===o.name)console.error("Request aborted:",o);else{if(E&&"TimeoutError"===o.name&&j&&j>0){const o=v&&R?d(R):p(j,w||r);h&&console.warn(`Request timed out. Retrying in ${o}ms... (Remaining retries: ${j})`),(null==g?void 0:g.preRetry)&&g.preRetry(e,t,j,j),yield new Promise((e=>setTimeout(e,o)));const[n,i]=yield b(e,Object.assign(Object.assign({},t),{retries:j-1}),f);return(null==g?void 0:g.postRetry)&&g.postRetry(e,t,f,[n,i],j,j-1),[n,i]}if(t.retries&&t.retries>0){const o=t.jitter&&t.jitterFactor?d(t.jitterFactor):p(t.retries,t.backoffFactor?t.backoffFactor:r);h&&console.warn(`Request failed. Retrying in ${o}ms... (Remaining retries: ${t.retries})`),(null==g?void 0:g.preRetry)&&g.preRetry(e,t,t.retries,t.retries),yield new Promise((e=>setTimeout(e,o)));const[n,i]=yield b(e,Object.assign(Object.assign({},t),{retries:t.retries-1}),f);return(null==g?void 0:g.postRetry)&&g.postRetry(e,t,f,[n,i],t.retries,t.retries-1),[n,i]}}return o instanceof Error?[o,null]:[null,null]}},new((y=void 0)||(y=Promise))((function(e,o){function r(e){try{i(g.next(e))}catch(e){o(e)}}function n(e){try{i(g.throw(e))}catch(e){o(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof y?o:new y((function(e){e(o)}))).then(r,n)}i((g=g.apply(t,f||[])).next())}));var t,f,y,g},y=(e,t="GET",o={},r,n)=>b(e,Object.assign({method:t},o),r,n),g={init:function(e,t,o=!1){if("undefined"==typeof fetch)throw new Error("This library is intended for use in the browser environment only.");const r={baseUrl:e,hooks:t,DEBUG:o};return{get:(e,t,o)=>y(e,"GET",t,o,r),post:(e,t,o)=>y(e,"POST",t,o,r),put:(e,t,o)=>y(e,"PUT",t,o,r),delete:(e,t,o)=>y(e,"DELETE",t,o,r),patch:(e,t,o)=>y(e,"PATCH",t,o,r),options:(e,t,o)=>y(e,"OPTIONS",t,o,r),getAbortController:f}}};return t})()));
//# sourceMappingURL=hyperfetch-browser.min.js.map