!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hypf",[],t):"object"==typeof exports?exports.hypf=t():e.hypf=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>b});const r=2147483647,o=.3,n=1,i="function"==typeof globalThis.AbortController,s="function"==typeof globalThis.ReadableStream,l="function"==typeof globalThis.WritableStream,a="function"==typeof globalThis.WebSocket,c="function"==typeof globalThis.RTCPeerConnection,u=(globalThis.FormData,"undefined"!=typeof process&&"node"===process.release.name);const f=(e,t)=>1e3*Math.pow(2,e)*t,p=e=>1e3*Math.random()*e,d=()=>i?globalThis.abortController:null,b={createRequest:function(e,t,b=!1){if("undefined"==typeof fetch)throw new Error("This library is intended for use in the browser environment only.");const y=(...d)=>{return g=this,h=[...d],T=function*(d="",g={},h){var m;try{(null==t?void 0:t.preRequest)&&t.preRequest(d,g);const p=`${e}${d}`,{method:b="GET",retries:y=0,backoff:T=f,jitter:j=!1,jitterFactor:O=n,backoffFactor:v=o,timeout:R=r,retryOnTimeout:w=!1,params:S,headers:C={},signal:E}=g,P=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(g,["method","retries","backoff","jitter","jitterFactor","backoffFactor","timeout","retryOnTimeout","params","headers","signal"]),x=new Headers(g.headers);!x.get("Content-Type")&&h&&"object"==typeof h&&x.set("Content-Type","application/json");const F=new TextEncoder;!x.get("Content-Length")&&h&&("string"==typeof h?x.set("Content-Length",String(F.encode(h).length)):(null===(m=x.get("Content-Length"))||void 0===m?void 0:m.includes("application/json"))&&x.set("Content-Length",String(F.encode(JSON.stringify(h)).length))),(null==t?void 0:t.preTimeout)&&t.preTimeout(d,g),i&&(globalThis.abortController=new AbortController,globalThis.abortSignal=E||globalThis.abortController.signal);const k=R&&i?setTimeout((()=>{globalThis.abortController.abort(),(null==t?void 0:t.postTimeout)&&t.postTimeout(d,g)}),R):void 0,q=S?function(e,t){if(!t)return e;const r=new URL(e);return Object.entries(t).forEach((([e,t])=>r.searchParams.append(e,String(t)))),r.toString()}(p,S):p;s&&!l&&u&&(P.duplex="half"),!s&&l&&u&&(P.duplex="half"),s&&l&&u&&(P.duplex="half"),c&&u&&(P.duplex="half"),a&&u&&(P.duplex="half");const $=fetch(q,Object.assign(Object.assign({method:b,signal:i?globalThis.abortSignal:null,headers:C},P),{body:h?JSON.stringify(h):void 0}));clearTimeout(k);const L=yield $;if(!L.ok)throw new Error(`Network response was not ok: ${L.status}`);const A=L.headers.get("content-type"),M=A&&A.includes("application/json")?yield L.json():yield L.text();return(null==t?void 0:t.postRequest)&&t.postRequest(d,g,h,[null,M]),[null,M]}catch(e){if((null==t?void 0:t.postRequest)&&e instanceof Error&&t.postRequest(d,g,h,[e,null]),e instanceof Error)if("AbortError"===e.name)console.error("Request aborted:",e);else{if(g.retryOnTimeout&&"TimeoutError"===e.name&&g.retries&&g.retries>0){const e=g.jitter&&g.jitterFactor?p(g.jitterFactor):f(g.retries,g.backoffFactor?g.backoffFactor:o);b&&console.warn(`Request timed out. Retrying in ${e}ms... (Remaining retries: ${g.retries})`),(null==t?void 0:t.preRetry)&&t.preRetry(d,g,g.retries,g.retries),yield new Promise((t=>setTimeout(t,e)));const[r,n]=yield y(d,Object.assign(Object.assign({},g),{retries:g.retries-1}),h);return(null==t?void 0:t.postRetry)&&t.postRetry(d,g,h,[r,n],g.retries,g.retries-1),[r,n]}if(g.retries&&g.retries>0){const e=g.jitter&&g.jitterFactor?p(g.jitterFactor):f(g.retries,g.backoffFactor?g.backoffFactor:o);b&&console.warn(`Request failed. Retrying in ${e}ms... (Remaining retries: ${g.retries})`),(null==t?void 0:t.preRetry)&&t.preRetry(d,g,g.retries,g.retries),yield new Promise((t=>setTimeout(t,e)));const[r,n]=yield y(d,Object.assign(Object.assign({},g),{retries:g.retries-1}),h);return(null==t?void 0:t.postRetry)&&t.postRetry(d,g,h,[r,n],g.retries,g.retries-1),[r,n]}}return e instanceof Error?[e,null]:[null,null]}},new((m=void 0)||(m=Promise))((function(e,t){function r(e){try{n(T.next(e))}catch(e){t(e)}}function o(e){try{n(T.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof m?n:new m((function(e){e(n)}))).then(r,o)}n((T=T.apply(g,h||[])).next())}));var g,h,m,T},g=(e,t={})=>(r="GET",o={},n)=>y(e,Object.assign(Object.assign({method:r},t),o),n);return{get:(e,t,r)=>g(e,t)("GET",t,r),post:(e,t,r)=>g(e,t)("POST",t,r),put:(e,t,r)=>g(e,t)("PUT",t,r),delete:(e,t,r)=>g(e,t)("DELETE",t,r),patch:(e,t,r)=>g(e,t)("PATCH",t,r),options:(e,t,r)=>g(e,t)("OPTIONS",t,r),getAbortController:d}}};return t})()));
//# sourceMappingURL=hyperfetch-browser.min.js.map