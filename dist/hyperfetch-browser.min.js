!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hypf",[],t):"object"==typeof exports?exports.hypf=t():e.hypf=t()}(self,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>y});const o=2147483647,r=.3,n=1,i="function"==typeof globalThis.AbortController,s="function"==typeof globalThis.ReadableStream,l="function"==typeof globalThis.WritableStream,a="function"==typeof globalThis.WebSocket,c="function"==typeof globalThis.RTCPeerConnection,u=(globalThis.FormData,"undefined"!=typeof process&&"node"===process.release.name);const f=(e,t)=>1e3*Math.pow(2,e)*t,p=e=>1e3*Math.random()*e,d=()=>i?globalThis.abortController:null,y={createRequest:function(e,t,y=!1){if("undefined"==typeof fetch)throw new Error("This library is intended for use in the browser environment only.");const b=(...d)=>{return g=this,h=[...d],T=function*(d="",g={},h){var m;const{method:T="GET",retries:j=0,backoff:O=f,jitter:v=!1,jitterFactor:R=n,backoffFactor:w=r,timeout:S=o,retryOnTimeout:E=!1,params:P,headers:x={},signal:C}=g,q=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}(g,["method","retries","backoff","jitter","jitterFactor","backoffFactor","timeout","retryOnTimeout","params","headers","signal"]);try{(null==t?void 0:t.preRequest)&&t.preRequest(d,g);const o=`${e}${d}`,r=new Headers(x),n=new TextEncoder;!r.get("Content-Length")&&h&&("string"==typeof h?r.set("Content-Length",String(n.encode(h).length)):(null===(m=r.get("Content-Length"))||void 0===m?void 0:m.includes("application/json"))&&r.set("Content-Length",String(n.encode(JSON.stringify(h)).length))),!r.get("Content-Type")&&h&&"object"==typeof h&&r.set("Content-Type","application/json"),(null==t?void 0:t.preTimeout)&&t.preTimeout(d,g),i&&(globalThis.abortController=new AbortController,globalThis.abortSignal=C||globalThis.abortController.signal);const f=S&&i?setTimeout((()=>{globalThis.abortController.abort(),(null==t?void 0:t.postTimeout)&&t.postTimeout(d,g)}),S):void 0,p=P?function(e,t){if(!t)return e;const o=new URL(e);return Object.entries(t).forEach((([e,t])=>o.searchParams.append(e,String(t)))),o.toString()}(o,P):o;s&&!l&&u&&(q.duplex="half"),!s&&l&&u&&(q.duplex="half"),s&&l&&u&&(q.duplex="half"),c&&u&&(q.duplex="half"),a&&u&&(q.duplex="half");const y=fetch(p,Object.assign(Object.assign({method:T,signal:i?globalThis.abortSignal:null,headers:r},q),{body:h?JSON.stringify(h):void 0}));clearTimeout(f);const b=yield y,j=b.headers.get("content-type"),O=j&&j.includes("application/json")?yield b.json():yield b.text();if(!b.ok)throw function(e,t){const o=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim(),r=new Error(o?`status code ${o}`:"an unknown error");return r.name="HTTPError",r.response=e,r.data=t,r}(b,O);return(null==t?void 0:t.postRequest)&&t.postRequest(d,g,h,[null,O]),[null,O]}catch(e){if((null==t?void 0:t.postRequest)&&e instanceof Error&&t.postRequest(d,g,h,[e,null]),e instanceof Error)if("AbortError"===e.name)console.error("Request aborted:",e);else{if(E&&"TimeoutError"===e.name&&j&&j>0){const e=v&&R?p(R):f(j,w||r);y&&console.warn(`Request timed out. Retrying in ${e}ms... (Remaining retries: ${j})`),(null==t?void 0:t.preRetry)&&t.preRetry(d,g,j,j),yield new Promise((t=>setTimeout(t,e)));const[o,n]=yield b(d,Object.assign(Object.assign({},g),{retries:j-1}),h);return(null==t?void 0:t.postRetry)&&t.postRetry(d,g,h,[o,n],j,j-1),[o,n]}if(g.retries&&g.retries>0){const e=g.jitter&&g.jitterFactor?p(g.jitterFactor):f(g.retries,g.backoffFactor?g.backoffFactor:r);y&&console.warn(`Request failed. Retrying in ${e}ms... (Remaining retries: ${g.retries})`),(null==t?void 0:t.preRetry)&&t.preRetry(d,g,g.retries,g.retries),yield new Promise((t=>setTimeout(t,e)));const[o,n]=yield b(d,Object.assign(Object.assign({},g),{retries:g.retries-1}),h);return(null==t?void 0:t.postRetry)&&t.postRetry(d,g,h,[o,n],g.retries,g.retries-1),[o,n]}}return e instanceof Error?[e,null]:[null,null]}},new((m=void 0)||(m=Promise))((function(e,t){function o(e){try{n(T.next(e))}catch(e){t(e)}}function r(e){try{n(T.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof m?n:new m((function(e){e(n)}))).then(o,r)}n((T=T.apply(g,h||[])).next())}));var g,h,m,T},g=(e,t={})=>(o="GET",r={},n)=>b(e,Object.assign(Object.assign({method:o},t),r),n);return{get:(e,t,o)=>g(e,t)("GET",t,o),post:(e,t,o)=>g(e,t)("POST",t,o),put:(e,t,o)=>g(e,t)("PUT",t,o),delete:(e,t,o)=>g(e,t)("DELETE",t,o),patch:(e,t,o)=>g(e,t)("PATCH",t,o),options:(e,t,o)=>g(e,t)("OPTIONS",t,o),getAbortController:d}}};return t})()));
//# sourceMappingURL=hyperfetch-browser.min.js.map