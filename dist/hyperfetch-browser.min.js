!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hypf",[],t):"object"==typeof exports?exports.hypf=t():e.hypf=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>i});const r=2147483647,o=.3,n=1,i={createRequest:function(e,t,i=!1){if("undefined"==typeof fetch)throw new Error("This library is intended for use in the browser environment only.");const s=(e,t)=>1e3*Math.pow(2,e)*t,a=e=>1e3*Math.random()*e,c=new AbortController,l=(...u)=>{return f=this,p=[...u],y=function*(u="",f={},p){var d;try{(null==t?void 0:t.preRequest)&&t.preRequest(u,f);const i=`${e}${u}`,{method:a="GET",retries:l=0,backoff:y=s,jitter:b=!1,jitterFactor:g=n,backoffFactor:m=o,timeout:h=r,retryOnTimeout:j=!1,params:O,headers:v={},signal:T}=f,w=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(f,["method","retries","backoff","jitter","jitterFactor","backoffFactor","timeout","retryOnTimeout","params","headers","signal"]),R=new Headers(f.headers);!R.get("Content-Type")&&p&&"object"==typeof p&&R.set("Content-Type","application/json");const P=new TextEncoder;!R.get("Content-Length")&&p&&("string"==typeof p?R.set("Content-Length",String(P.encode(p).length)):(null===(d=R.get("Content-Length"))||void 0===d?void 0:d.includes("application/json"))&&R.set("Content-Length",String(P.encode(JSON.stringify(p)).length)));const S=T||c.signal;(null==t?void 0:t.preTimeout)&&t.preTimeout(u,f);const E=h?setTimeout((()=>{c.abort(),(null==t?void 0:t.postTimeout)&&t.postTimeout(u,f)}),h):void 0,F=O?function(e,t){if(!t)return e;const r=new URL(e);return Object.entries(t).forEach((([e,t])=>r.searchParams.append(e,String(t)))),r.toString()}(i,O):i,k=fetch(F,Object.assign(Object.assign({method:a,signal:S,headers:v},w),{body:p?JSON.stringify(p):void 0}));clearTimeout(E);const q=yield k;if(!q.ok)throw new Error(`Network response was not ok: ${q.status}`);const x=q.headers.get("content-type"),C=x&&x.includes("application/json")?yield q.json():yield q.text();return(null==t?void 0:t.postRequest)&&t.postRequest(u,f,p,[null,C]),[null,C]}catch(e){if((null==t?void 0:t.postRequest)&&t.postRequest(u,f,p,[e,null]),e instanceof Error)if("AbortError"===e.name)console.error("Request aborted:",e);else{if(f.retryOnTimeout&&"TimeoutError"===e.name&&f.retries&&f.retries>0){const e=f.jitter&&f.jitterFactor?a(f.jitterFactor):s(f.retries,f.backoffFactor?f.backoffFactor:o);i&&console.warn(`Request timed out. Retrying in ${e}ms... (Remaining retries: ${f.retries})`),(null==t?void 0:t.preRetry)&&t.preRetry(u,f,f.retries,f.retries),yield new Promise((t=>setTimeout(t,e)));const[r,n]=yield l(u,Object.assign(Object.assign({},f),{retries:f.retries-1}),p);return(null==t?void 0:t.postRetry)&&t.postRetry(u,f,p,[r,n],f.retries,f.retries-1),[r,n]}if(f.retries&&f.retries>0){const e=f.jitter&&f.jitterFactor?a(f.jitterFactor):s(f.retries,f.backoffFactor?f.backoffFactor:o);i&&console.warn(`Request failed. Retrying in ${e}ms... (Remaining retries: ${f.retries})`),(null==t?void 0:t.preRetry)&&t.preRetry(u,f,f.retries,f.retries),yield new Promise((t=>setTimeout(t,e)));const[r,n]=yield l(u,Object.assign(Object.assign({},f),{retries:f.retries-1}),p);return(null==t?void 0:t.postRetry)&&t.postRetry(u,f,p,[r,n],f.retries,f.retries-1),[r,n]}}return[e,null]}},new((d=void 0)||(d=Promise))((function(e,t){function r(e){try{n(y.next(e))}catch(e){t(e)}}function o(e){try{n(y.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof d?n:new d((function(e){e(n)}))).then(r,o)}n((y=y.apply(f,p||[])).next())}));var f,p,d,y},u=(e,t)=>(r="GET",o={},n)=>l(e,Object.assign(Object.assign({method:r},t),o),n);return{get:(e,t,r)=>u(e,t)("GET",t,r),post:(e,t,r)=>u(e,t)("POST",t,r),put:(e,t,r)=>u(e,t)("PUT",t,r),delete:(e,t,r)=>u(e,t)("DELETE",t,r),patch:(e,t,r)=>u(e,t)("PATCH",t,r),options:(e,t,r)=>u(e,t)("OPTIONS",t,r),getAbortController:()=>c}}};return t})()));
//# sourceMappingURL=hyperfetch-browser.min.js.map